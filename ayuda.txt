GUIA DE ESTUDIO - TEST
Sistema de Gesti√≥n de Herramientas Comunitarias
M√≥dulo nuevo + Importaciones desde el proyecto
1. ESTRUCTURA DEL PROYECTO (lo que existe)
El proyecto tiene los siguientes m√≥dulos que YA est√°n creados:

M√≥dulo
Funciones exportables clave
gestor_herramientas.py
cargar_herramientas(), guardar_herramientas(), registrar_herramienta(), listar_herramientas(), consultar_herramienta(), actualizar_herramienta(), inactivar_herramienta(), herramientas_stock_bajo()
gestor_usuarios.py
cargar_usuarios(), guardar_usuarios(), registrar_usuario(), listar_usuarios(), consultar_usuario(), actualizar_usuario(), eliminar_usuario()
gestor_prestamos.py
cargar_prestamos(), guardar_prestamos(), cargar_solicitudes(), guardar_solicitudes(), solicitar_prestamo(), aprobar_solicitud(), rechazar_solicitud(), prestamo_herramienta_directo(), devolver_herramienta(), mis_prestamos()
gestor_reportes.py
cargar_datos(), reporte_stock_bajo(), reporte_prestamos_activos(), reporte_prestamos_vencidos(), historial_prestamos_usuario(), herramientas_mas_solicitadas(), usuarios_mas_activos(), menu_reportes()
gestor_logs.py
registrar_evento(), ver_logs_recientes(), ver_logs_por_tipo(), ver_logs_por_usuario()
gestor_permisos.py
cargar_credenciales(), guardar_credenciales(), login(), registrar_credencial(), cambiar_password()


2. ESTRUCTURA DE LOS DATOS (archivos JSON)
Todos los datos se guardan en archivos .json. Es CLAVE conocer qu√© campos tiene cada objeto:

Herramienta (herramientas.json)
Campo
Tipo
Ejemplo
codigo
str (MAYUSCULAS, sin espacios)
TALADRO001
nombre
str (m√≠n 3 chars)
Taladro El√©ctrico
categoria
str (solo letras)
construccion
cantidad
int (>= 0)
3
estado
str
activa / en reparacion / fuera de servicio
valor
float (>= 0)
350000


Usuario (usuarios.json)
Campo
Tipo / Regla
Ejemplo
identificacion
str, solo n√∫meros, 6-15 d√≠gitos, √∫nico
1001234567
nombre
str, solo letras (permite espacios), m√≠n 2 chars
Juan Carlos
apellido
str, solo letras (permite espacios), m√≠n 2 chars
Garc√≠a
telefono
str, exactamente 10 d√≠gitos num√©ricos
3001234567
direccion
str, m√≠n 5 chars
Calle 45 # 12-30
tipo
str: 'residente' o 'administrador'
residente


Pr√©stamo (prestamos.json)
Campo
Tipo / Regla
Ejemplo
id_prestamo
str auto-generado
PRES0001
id_usuario
str (identificacion del usuario)
1001234567
id_herramienta
str (codigo de herramienta)
TALADRO001
cantidad
int
1
fecha_inicio
str YYYY-MM-DD
2026-02-17
fecha_devolucion
str YYYY-MM-DD, > fecha_inicio
2026-02-20
estado
str: 'activo' o 'devuelto'
activo


Solicitud (solicitudes.json)
Campo
Valor posible
id_solicitud
SOL0001, SOL0002, ...
usuario
identificacion del residente
herramienta
codigo de herramienta
cantidad
int
fecha_inicio / fecha_devolucion
str YYYY-MM-DD
observaciones
str libre
estado
'pendiente', 'aprobada', 'rechazada'


3. C√ìMO IMPORTAR (sintaxis exacta para el test)
üí° El m√≥dulo nuevo debe estar en la MISMA CARPETA del proyecto

Importaciones m√°s probables en el test:
from gestor_herramientas import cargar_herramientas, guardar_herramientas
from gestor_usuarios import cargar_usuarios, guardar_usuarios
from gestor_prestamos import cargar_prestamos, cargar_solicitudes
from gestor_reportes import cargar_datos
from gestor_logs import registrar_evento

Patr√≥n base de todo m√≥dulo del proyecto:
import json


def cargar_X():
    try:
        with open('archivo.json', 'r', encoding='utf-8') as f:
            return json.load(f)
    except FileNotFoundError:
        return []


def guardar_X(datos):
    with open('archivo.json', 'w', encoding='utf-8') as f:
        json.dump(datos, f, indent=4, ensure_ascii=False)

4. FUNCIONALIDADES QUE PROBABLEMENTE SALGAN
‚ö†Ô∏è  El profe dijo: 'm√≥dulo distinto, funcionalidad nueva, importar del proyecto'

Opci√≥n A ‚Äî Reporte personalizado (MUY PROBABLE)
Ejemplo: m√≥dulo que muestra herramientas por categor√≠a con su stock total
# mi_reporte.py
from gestor_herramientas import cargar_herramientas


def reporte_por_categoria():
    inventario = cargar_herramientas()
    categorias = {}
    for herramienta in inventario.values():
        cat = herramienta['categoria']
        if cat not in categorias:
            categorias[cat] = {'cantidad_total': 0, 'herramientas': []}
        categorias[cat]['cantidad_total'] += herramienta['cantidad']
        categorias[cat]['herramientas'].append(herramienta['nombre'])
    for cat, datos in categorias.items():
        print(f'Categoria: {cat} | Stock total: {datos["cantidad_total"]}')
        for h in datos['herramientas']:
            print(f'   - {h}')

Opci√≥n B ‚Äî Buscar pr√©stamos de una herramienta espec√≠fica
# buscar_prestamos.py
from gestor_prestamos import cargar_prestamos
from gestor_herramientas import cargar_herramientas


def prestamos_por_herramienta(codigo_herramienta):
    prestamos = cargar_prestamos()
    inventario = cargar_herramientas()
    resultado = []
    for prestamo in prestamos.values():
        if prestamo['id_herramienta'] == codigo_herramienta.upper():
            resultado.append(prestamo)
    if not resultado:
        print('No hay prestamos para esa herramienta.')
    else:
        for p in resultado:
            print(f"ID: {p['id_prestamo']} | Usuario: {p['id_usuario']} | Estado: {p['estado']}")

Opci√≥n C ‚Äî Estad√≠stica de pr√©stamos activos vs devueltos
# estadisticas.py
from gestor_prestamos import cargar_prestamos
from gestor_usuarios import cargar_usuarios


def resumen_estadistico():
    prestamos = cargar_prestamos()
    activos = sum(1 for p in prestamos.values() if p['estado'] == 'activo')
    devueltos = sum(1 for p in prestamos.values() if p['estado'] == 'devuelto')
    total = len(prestamos)
    print(f'Total prestamos: {total}')
    print(f'Activos: {activos} ({activos*100//total if total else 0}%)')
    print(f'Devueltos: {devueltos} ({devueltos*100//total if total else 0}%)')

Opci√≥n D ‚Äî Registrar herramienta nueva desde otro m√≥dulo
# agregar_herramienta.py
from gestor_herramientas import cargar_herramientas, guardar_herramientas
from gestor_logs import registrar_evento


def agregar_herramienta_especial(usuario_actual):
    inventario = cargar_herramientas()
    codigo = input('Codigo: ').upper().strip()
    if ' ' in codigo or len(codigo) < 3:
        print('Error: Codigo invalido.')
        return
    if codigo in inventario:
        print('Error: Ya existe.')
        return
    nombre = input('Nombre: ').strip()
    inventario[codigo] = {
        'codigo': codigo, 'nombre': nombre,
        'categoria': 'especial', 'cantidad': 1,
        'estado': 'activa', 'valor': 0
    }
    guardar_herramientas(inventario)
    registrar_evento('INFO', usuario_actual, f'Herramienta especial: {codigo}')
    print('Herramienta registrada.')

Opci√≥n E ‚Äî Listar usuarios con pr√©stamos activos
# usuarios_activos.py
from gestor_prestamos import cargar_prestamos
from gestor_usuarios import cargar_usuarios


def usuarios_con_prestamos_activos():
    prestamos = cargar_prestamos()
    usuarios = cargar_usuarios()
    ids_con_prestamo = set()
    for p in prestamos.values():
        if p['estado'] == 'activo':
            ids_con_prestamo.add(p['id_usuario'])
    print(f'Usuarios con prestamos activos: {len(ids_con_prestamo)}')
    for uid in ids_con_prestamo:
        if uid in usuarios:
            u = usuarios[uid]
            print(f"{u['nombre']} {u['apellido']} | Tel: {u['telefono']}")

5. VALIDACIONES IMPORTANTES (memorizarlas)

Qu√© validar
C√≥digo Python exacto del proyecto
Tel√©fono (10 d√≠gitos)
not telefono.isdigit() or len(telefono) != 10
Nombre/Apellido (solo letras)
not nombre.replace(' ', '').isalpha() or len(nombre) < 2
Identificaci√≥n (solo n√∫meros, 6-15 dig.)
not identificacion.isdigit() or not (6 <= len(identificacion) <= 15)
C√≥digo herramienta (sin espacios)
' ' in codigo or len(codigo) < 3   ‚Üí   codigo = codigo.upper()
Categor√≠a (solo letras)
not categoria.replace(' ', '').isalpha()
Cantidad (no negativa)
cantidad < 0  (+ try/except ValueError para int())
Valor (no negativo)
valor < 0  (+ try/except ValueError para float())
Estado herramienta (v√°lido)
estado not in ['activa', 'en reparacion', 'fuera de servicio']
Tipo usuario (v√°lido)
tipo not in ['residente', 'administrador']
Fecha (formato YYYY-MM-DD)
Separar con '-', validar mes/d√≠a seg√∫n a√±o bisiesto


C√≥mo se validan fechas (l√≥gica del proyecto):
def validar_fecha(fecha_str):
    partes = fecha_str.split('-')
    if len(partes) != 3: return False
    anio, mes, dia = int(partes[0]), int(partes[1]), int(partes[2])
    if not (2020 <= anio <= 2100): return False
    if not (1 <= mes <= 12): return False
    dias_por_mes = [31,28,31,30,31,30,31,31,30,31,30,31]
    if (anio % 4 == 0 and anio % 100 != 0) or (anio % 400 == 0):
        dias_por_mes[1] = 29  # a√±o bisiesto
    return 1 <= dia <= dias_por_mes[mes - 1]

6. TIPS PARA EL TEST

El m√≥dulo nuevo va en la MISMA CARPETA del proyecto.
Empez√° importando las funciones que necesitas del proyecto.
Los datos vienen en diccionarios Python (los .json se cargan con json.load).
Los datos de herramientas usan el CODIGO como clave del dict: inventario['TAL001']
Los datos de usuarios usan la IDENTIFICACION como clave: usuarios['1001234567']
Los datos de pr√©stamos usan el ID_PRESTAMO como clave: prestamos['PRES0001']
Para guardar: siempre llamar guardar_X(datos) despu√©s de modificar.
registrar_evento() requiere: tipo ('INFO','ERROR','WARNING'), usuario_actual, descripcion.

üí° Si el profe pide 'funcionalidad nueva que use datos del proyecto', lo m√°s f√°cil es un m√≥dulo que CONSULTA datos (solo cargar_X) sin modificar nada ‚Üí no tienes que validar ni guardar.
‚ö†Ô∏è  ¬°Recuerda que los datos de inventario son .values() si es diccionario, o iteraci√≥n directa si es lista!

Plantilla base para el test:
# mi_modulo_nuevo.py
# Importar lo necesario del proyecto
from gestor_herramientas import cargar_herramientas
from gestor_usuarios import cargar_usuarios
from gestor_prestamos import cargar_prestamos
from gestor_logs import registrar_evento


def mi_funcion_nueva(usuario_actual):
    # 1. Cargar los datos
    inventario = cargar_herramientas()
    # 2. Procesar
    for codigo, herramienta in inventario.items():
        print(herramienta['nombre'], herramienta['cantidad'])
    # 3. Registrar evento si hace falta
    registrar_evento('INFO', usuario_actual, 'Consulta realizada')


# Punto de entrada
if __name__ == '__main__':
    mi_funcion_nueva('admin')

¬°Mucha suerte ma√±ana! üöÄ
